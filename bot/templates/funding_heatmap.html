<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;700;800&family=JetBrains+Mono:wght@700&display=swap');
        * { box-sizing: border-box; }
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background-color: #05070a; color: white;
            width: 800px; height: 800px; padding: 40px;
            margin: 0; display: flex; flex-direction: column; overflow: hidden;
        }
        .mono { font-family: 'JetBrains Mono', monospace; }
        .heatmap-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; }
        .cell {
            height: 70px; border-radius: 12px; display: flex; flex-direction: column;
            align-items: center; justify-content: center; border: 1px solid rgba(255,255,255,0.05);
        }
        .cell-name { font-weight: 800; font-size: 13px; }
        .cell-val { font-size: 11px; font-weight: 700; }
        .glass {
            background: rgba(255, 255, 255, 0.03); backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.08); border-radius: 24px; padding: 20px;
        }
        .label { color: #64748b; font-size: 10px; font-weight: 800; text-transform: uppercase; letter-spacing: 2px; }
    </style>
</head>
<body>
    <div class="flex justify-between items-start mb-8">
        <div class="flex items-center gap-4">
            <div class="w-12 h-12 bg-indigo-600 rounded-xl flex items-center justify-center">
                <span class="text-2xl font-black">V</span>
            </div>
            <div>
                <h1 class="text-2xl font-black tracking-tighter uppercase leading-none">Velox <span class="text-indigo-500">Insights</span></h1>
                <p class="text-slate-500 font-bold text-[8px] tracking-[0.3em] uppercase mt-1">Market Terminal</p>
            </div>
        </div>
        <div class="text-right">
            <div class="text-lg font-black mono text-slate-200">{{ date }}</div>
            <div class="text-indigo-400 font-bold text-[9px] uppercase tracking-widest mt-1">t.me/veloxhlbot</div>
        </div>
    </div>
    <div class="mb-4 flex items-center gap-3">
        <span class="w-1.5 h-6 bg-indigo-500 rounded-full"></span>
        <h2 class="text-xl font-black uppercase tracking-tight">Funding Heatmap <span class="text-slate-500 text-xs ml-2 mono">APR %</span></h2>
    </div>
    <div class="heatmap-grid mb-6">
        {% for item in funding_map[:25] %}
        <div class="cell" style="background: {{ 'rgba(16, 185, 129, ' + (item.apr|abs/150 + 0.1)|string + ')' if item.apr > 0 else 'rgba(244, 63, 94, ' + (item.apr|abs/80 + 0.1)|string + ')' }}; border-color: {{ 'rgba(16, 185, 129, 0.3)' if item.apr > 0 else 'rgba(244, 63, 94, 0.3)' }}">
            <div class="cell-name">{{ item.name }}</div>
            <div class="cell-val mono">{{ '+' if item.apr > 0 else '' }}{{ item.apr }}%</div>
        </div>
        {% endfor %}
    </div>
    <div class="grid grid-cols-2 gap-4 mb-6">
        <div class="glass">
            <div class="label mb-2">Sentiment</div>
            <div class="text-3xl font-black mb-4">{{ sentiment_label }}</div>
            <div class="flex justify-between items-center text-xs">
                <span class="text-slate-400 font-bold">AVG FUNDING</span>
                <span class="font-bold mono {{ 'text-emerald-400' if avg_funding > 0 else 'text-rose-400' }}">{{ avg_funding }}%</span>
            </div>
        </div>
        <div class="glass">
            <div class="label mb-2">24H Volume</div>
            <div class="text-3xl font-black mono text-indigo-400 mb-4">${{ global_volume }}</div>
            <div class="flex justify-between items-center text-xs">
                <span class="text-slate-400 font-bold">OPEN INTEREST</span>
                <span class="font-bold mono text-slate-200">${{ total_oi }}</span>
            </div>
        </div>
    </div>
    <div class="mt-auto text-center border-t border-white/5 pt-4">
        <div class="text-[8px] text-slate-600 font-bold tracking-[0.5em] uppercase">Velox Terminal â€¢ Powered by t.me/veloxhlbot</div>
    </div>
</body>
</html>